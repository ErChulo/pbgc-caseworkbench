<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>web</title>
    <script type="module">
(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))o(a);new MutationObserver(a=>{for(const r of a)if(r.type==="childList")for(const d of r.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&o(d)}).observe(document,{childList:!0,subtree:!0});function t(a){const r={};return a.integrity&&(r.integrity=a.integrity),a.referrerPolicy&&(r.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?r.credentials="include":a.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function o(a){if(a.ep)return;a.ep=!0;const r=t(a);fetch(a.href,r)}})();const p="0.7.0",l={appVersion:p,planMetadata:null,lastManifest:null},c=[{path:"#/metadata",title:"Metadata",render:y},{path:"#/audit",title:"Audit",render:g}];function u(e){location.hash!==e&&(location.hash=e)}function m(){const e=location.hash||"#/metadata";return c.find(n=>n.path===e)??c[0]}function f(){const e=document.querySelector("#app"),n=c.map(t=>`<button data-route="${t.path}" style="margin-right:8px;">${t.title}</button>`).join("");e.innerHTML=`
    <div style="font-family: system-ui, -apple-system, Segoe UI, Roboto, sans-serif; padding: 16px;">
      <div style="display:flex; justify-content:space-between; align-items:center;">
        <div>
          ${n}
        </div>
        <div style="opacity:0.7;">v${l.appVersion}</div>
      </div>
      <hr style="margin:12px 0;" />
      <div id="page"></div>
    </div>
  `,e.querySelectorAll("button[data-route]").forEach(t=>{t.addEventListener("click",()=>u(t.dataset.route))})}function s(){f();const e=document.querySelector("#page");m().render(e)}function y(e){const n=l.planMetadata??{case:{plan_name:"",case_number:"",dopt:""},documents:[],dependent_fields:{}};e.innerHTML=`
    <h2>Plan Metadata</h2>

    <div style="display:grid; grid-template-columns: 160px 1fr; gap:8px; max-width: 720px;">
      <label>Plan name</label>
      <input id="plan_name" value="${i(n.case.plan_name??"")}" />

      <label>Case number</label>
      <input id="case_number" value="${i(String(n.case.case_number??""))}" />

      <label>DOPT</label>
      <input id="dopt" placeholder="MM/DD/YYYY" value="${i(n.case.dopt??"")}" />
    </div>

    <div style="margin-top:12px;">
      <button id="save">Save metadata</button>
      <button id="export" style="margin-left:8px;">Download metadata.json</button>
      <label style="margin-left:12px;">
        <input id="import" type="file" accept="application/json" style="display:none;" />
        <button id="importBtn">Upload metadata.json</button>
      </label>
    </div>

    <pre style="margin-top:12px; background:#111; color:#eee; padding:12px; border-radius:8px; overflow:auto;">
${i(JSON.stringify(n,null,2))}
    </pre>
  `,e.querySelector("#save").addEventListener("click",()=>{const t=e.querySelector("#plan_name").value.trim(),o=e.querySelector("#case_number").value.trim(),a=e.querySelector("#dopt").value.trim();l.planMetadata={...n,case:{...n.case,plan_name:t,case_number:o,dopt:a}},l.lastManifest={app_version:l.appVersion,module:"metadata",generated_at_utc:new Date().toISOString()},s()}),e.querySelector("#export").addEventListener("click",()=>{const t=new Blob([JSON.stringify(l.planMetadata??n,null,2)],{type:"application/json"});v(t,"plan-metadata.json")}),e.querySelector("#importBtn").addEventListener("click",()=>{e.querySelector("#import").click()}),e.querySelector("#import").addEventListener("change",async t=>{const o=t.target.files?.[0];if(!o)return;const a=await o.text();l.planMetadata=JSON.parse(a),l.lastManifest={app_version:l.appVersion,module:"metadata",generated_at_utc:new Date().toISOString(),input_file:o.name},s()})}function g(e){e.innerHTML=`
    <h2>Audit / Manifest</h2>
    <p>Last action manifest:</p>
    <pre style="background:#111; color:#eee; padding:12px; border-radius:8px; overflow:auto;">
${i(JSON.stringify(l.lastManifest??{note:"No actions yet."},null,2))}
    </pre>
  `}function v(e,n){const t=document.createElement("a"),o=URL.createObjectURL(e);t.href=o,t.download=n,document.body.appendChild(t),t.click(),t.remove(),URL.revokeObjectURL(o)}function i(e){return String(e).replaceAll("&","&amp;").replaceAll("<","&lt;").replaceAll(">","&gt;").replaceAll('"',"&quot;").replaceAll("'","&#039;")}window.addEventListener("hashchange",s);location.hash||(location.hash="#/metadata");s();

</script>
    <style>
:root{font-family:system-ui,Avenir,Helvetica,Arial,sans-serif;line-height:1.5;font-weight:400;color-scheme:light dark;color:#ffffffde;background-color:#242424;font-synthesis:none;text-rendering:optimizeLegibility;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}a{font-weight:500;color:#646cff;text-decoration:inherit}a:hover{color:#535bf2}body{margin:0;display:flex;place-items:center;min-width:320px;min-height:100vh}h1{font-size:3.2em;line-height:1.1}#app{max-width:1280px;margin:0 auto;padding:2rem;text-align:center}.logo{height:6em;padding:1.5em;will-change:filter;transition:filter .3s}.logo:hover{filter:drop-shadow(0 0 2em #646cffaa)}.logo.vanilla:hover{filter:drop-shadow(0 0 2em #f7df1eaa)}.card{padding:2em}.read-the-docs{color:#888}button{border-radius:8px;border:1px solid transparent;padding:.6em 1.2em;font-size:1em;font-weight:500;font-family:inherit;background-color:#1a1a1a;cursor:pointer;transition:border-color .25s}button:hover{border-color:#646cff}button:focus,button:focus-visible{outline:4px auto -webkit-focus-ring-color}@media(prefers-color-scheme:light){:root{color:#213547;background-color:#fff}a:hover{color:#747bff}button{background-color:#f9f9f9}}

</style>
  </head>
  <body>
    <div id="app"></div>
  </body>
</html>
